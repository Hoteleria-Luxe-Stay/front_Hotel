<div class="pt-24 pb-12 px-4">
  <div class="max-w-5xl mx-auto page-enter">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8">
      <div>
        <h1 class="text-3xl font-semibold text-white">Mis Notificaciones</h1>
        <p class="text-slate-300 mt-1">Revisa tus alertas y actualizaciones recientes</p>
      </div>
      <div class="flex items-center gap-3">
        <select (change)="onFiltroChange($event)"
          class="px-3 py-2 border border-slate-600 rounded-lg bg-slate-900/60 text-slate-100">
          <option value="todas">Todas</option>
          <option value="no-leidas">No leídas</option>
          <option value="leidas">Leídas</option>
        </select>
        <button (click)="marcarTodasComoLeidas()"
          class="px-4 py-2 btn-primary">
          Marcar todas
        </button>
      </div>
    </div>

    @if (loading()) {
    <div class="surface-card rounded-2xl p-8 text-center text-slate-200">
      Cargando notificaciones...
    </div>
    } @else if (error()) {
    <div class="bg-red-500/10 border border-red-500/30 rounded-2xl p-4 text-red-200">
      {{ error() }}
    </div>
    } @else if (notificaciones().length === 0) {
    <div class="surface-card rounded-2xl p-8 text-center text-slate-200">
      No tienes notificaciones por el momento.
    </div>
    } @else {
    <div class="space-y-4">
      @for (notificacion of notificaciones(); track notificacion.id) {
      <div class="surface-card rounded-2xl p-5 shadow-sm">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="flex items-center gap-2">
              <span class="text-xs uppercase tracking-wide px-2 py-1 rounded-full"
                [class.bg-amber-400/20]="!notificacion.leida"
                [class.text-amber-200]="!notificacion.leida"
                [class.bg-slate-700/40]="notificacion.leida"
                [class.text-slate-300]="notificacion.leida">
                {{ getEventTypeLabel(notificacion.eventType) }}
              </span>
              <span class="text-xs text-slate-400">{{ formatDate(notificacion.fechaCreacion) }}</span>
            </div>
            <h3 class="text-lg font-semibold text-white mt-2">{{ notificacion.titulo }}</h3>
            <p class="text-slate-300 mt-1">{{ notificacion.mensaje }}</p>
          </div>
          <div>
            @if (!notificacion.leida) {
            <button (click)="marcarComoLeida(notificacion.id)"
              class="px-3 py-1.5 text-sm rounded-lg border border-amber-400/60 text-amber-200 hover:bg-amber-400/10">
              Marcar como leída
            </button>
            }
          </div>
        </div>
      </div>
      }
    </div>
    }
  </div>
</div>
